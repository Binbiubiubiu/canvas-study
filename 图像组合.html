<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>图像组合</title>
    <style>
        html,
        body {
            margin: 0;

        }

        canvas {
            box-shadow: 0 0 40px #333;
        }
    </style>
</head>

<body onload="draw()">
    <canvas id="canvas1" width="400" height="400">
        浏览器不支持canvas
    </canvas>
    <canvas id="canvas2" width="400" height="400">
        浏览器不支持canvas
    </canvas>
    <canvas id="canvas3" width="400" height="400">
        浏览器不支持canvas
    </canvas>
    <canvas id="canvas4" width="400" height="400">
        浏览器不支持canvas
    </canvas>
    <script>
        function draw() {
            // 画布1
            const canvas1 = document.getElementById("canvas1");
            if (canvas1.getContext) {
                const cvsCtx1 = canvas1.getContext('2d');

                cvsCtx1.beginPath();
                cvsCtx1.fillStyle = 'red';
                cvsCtx1.fillRect(50, 50, 100, 100);

                // 图像混合
                cvsCtx1.globalCompositeOperation = "source-over";
                cvsCtx1.fillStyle = 'green';
                cvsCtx1.arc(150, 150, 50, 0, Math.PI * 2, false);
                cvsCtx1.fill();

                /*
                * 目标图像：画布已经存在的图像
                * 源图像：即将画到画布上的图像
                * 
                * source-over: 重叠区域，源图像覆盖目标图像
                * desination-over：重叠区域，目标图像覆盖源图像
                */
            }

            // 画布2
            const canvas2 = document.getElementById("canvas2");
            if (canvas2.getContext) {
                const cvsCtx2 = canvas2.getContext('2d');

                cvsCtx2.beginPath();
                cvsCtx2.fillStyle = 'red';
                cvsCtx2.fillRect(50, 50, 100, 100);

                // 图像混合
                cvsCtx2.globalCompositeOperation = "destination-atop";
                cvsCtx2.fillStyle = 'green';
                cvsCtx2.arc(150, 150, 50, 0, Math.PI * 2, false);
                cvsCtx2.fill();

                /*
                * 目标图像：画布已经存在的图像
                * 源图像：即将画到画布上的图像
                * 
                * source-atop: 只显示与目标图像重叠的部分
                * desination-atop：只显示与源图像重叠的部分
                */
            }

            // 画布3
            const canvas3 = document.getElementById("canvas3");
            if (canvas3.getContext) {
                const cvsCtx3 = canvas3.getContext('2d');

                cvsCtx3.beginPath();
                cvsCtx3.fillStyle = 'red';
                cvsCtx3.fillRect(50, 50, 100, 100);

                // 图像混合
                cvsCtx3.globalCompositeOperation = "source-in";
                cvsCtx3.fillStyle = 'green';
                cvsCtx3.arc(150, 150, 50, 0, Math.PI * 2, false);
                cvsCtx3.fill();

                /*
                * 目标图像：画布已经存在的图像
                * 源图像：即将画到画布上的图像
                * 
                * source-in: 只显示与目标图像重叠部分的源图像
                * desination-in：只显示与源图像重叠部分的目标图像
                */
            }

            // 画布4
            const canvas4 = document.getElementById("canvas4");
            if (canvas4.getContext) {
                const cvsCtx4 = canvas4.getContext('2d');

                cvsCtx4.beginPath();
                cvsCtx4.fillStyle = 'red';
                cvsCtx4.fillRect(50, 50, 100, 100);

                // 图像混合
                cvsCtx4.globalCompositeOperation = "destination-out";
                cvsCtx4.fillStyle = 'green';
                cvsCtx4.arc(150, 150, 50, 0, Math.PI * 2, false);
                cvsCtx4.fill();

                /*
                * 目标图像：画布已经存在的图像
                * 源图像：即将画到画布上的图像
                * 
                * source-out: 重叠不显示，显示不重叠的源图像
                * destination-out：重叠部分不显示，显示不重叠的目标图像
                */
            }
        }


    </script>
</body>

</html>